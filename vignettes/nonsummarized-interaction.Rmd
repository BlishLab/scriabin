---
title: "R Notebook"
output: html_notebook
---


Attempt to build non-summarized interaction graph for embedding and downstream analysis

Goal: create a matrix of n lig-rec pairs x m receiver-sender pairs and embed and analysis this. 
Each point is a cell-cell pair rather than a single cell.

If there is structure here, the ultimate hope would be to treat this sender-receiver pair matrix as a Seurat object with metadata including receiver and sender cell type as well as active ligands. 

Using IFNB dataset from single-dataset vignette. 100x100 cells. 

```{r}
seu <- subset(subseu, cells = sample(colnames(subseu),200))
dim(seu)
test_edgeseu <- scInteraction(seu, cell.type.calls = "seurat_annotations")

DimPlot(test_edgeseu)
```



```{r}
set.seed(123)
a <- matrix(abs(rnorm(12)),nrow=4)
b <- matrix(abs(rnorm(12)),nrow=4)

a <- matrix(1:12,4.3)
b <- matrix(13:24,4,3)
# 
# 
# c <- t(sapply(1:3, function(i) tcrossprod(a[i, ], b[i, ])))
# 
# d <- t(mapply(outer, split(a, 1:3), split(b, 1:3)))
# 
# e <- matrix(apply(a %o% b, c(2, 4), diag), 3)

f <- (b %x% a)[!!diag(4), ]
a
b
# c
# d
# e
f
```


